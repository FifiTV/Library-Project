{{define "top_books"}}
<div class="container mx-auto px-4 py-5 max-w-screen-xl">
    <h2 class="text-2xl font-semibold mb-4 text-center">Nasze polecenia!</h2>
    <div id="books-container" class="flex flex-wrap gap-4 justify-center">
        <!-- Book cards will be injected here -->
    </div>
</div>

<script>
    async function fetchBooks() {
        try {
            const response = await fetch('http://127.0.0.1:8080/api/get-best-books'); // Replace with your actual API URL
            const books = await response.json(); 
            
            const booksContainer = document.getElementById('books-container');
            booksContainer.innerHTML = ''; // Clear the container before adding new books

            books.forEach((book, index) => {
                const bookCard = document.createElement('div');
                bookCard.classList.add('flex-none', 'w-48', 'bg-white', 'rounded-lg', 'shadow-lg', 'p-4', 'relative');
                
                // Adding rank number above the cover
                const bookRank = document.createElement('span');
                bookRank.classList.add('absolute', 'top-0', 'left-1/2', 'transform', '-translate-x-1/2', 
                                       'text-4xl', 'font-bold', 'text-gray-800', 'z-10', 'mb-2', 'bg-yellow-300', 'px-2', 'py-1', 'rounded-full');
                bookRank.textContent = `${index + 1}`;
                bookCard.appendChild(bookRank);

                const bookImage = document.createElement('img');
                bookImage.src = book.Cover;
                bookImage.alt = book.Title;
                bookImage.classList.add('w-full', 'h-60', 'object-cover', 'rounded-md', 'mb-4');
                bookCard.appendChild(bookImage);

                const bookTitle = document.createElement('h3');
                bookTitle.classList.add('text-lg', 'font-semibold', 'text-center');
                bookTitle.textContent = book.Title;
                bookCard.appendChild(bookTitle);

                const bookAuthor = document.createElement('p');
                bookAuthor.classList.add('text-center', 'text-gray-500');
                bookAuthor.textContent = book.Author;
                bookCard.appendChild(bookAuthor);

                booksContainer.appendChild(bookCard);
            });
        } catch (error) {
            console.error('Error fetching books:', error);
        }
    }
    fetchBooks();
</script>
{{end}}
